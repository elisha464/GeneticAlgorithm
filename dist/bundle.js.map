{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Chromosome.ts","webpack:///./src/ChromosomeFitnessCalculator.ts","webpack:///./src/Circle.ts","webpack:///./src/Color.ts","webpack:///./src/index.ts","webpack:///./src/webgl/CircleTextureBuilder.ts","webpack:///./src/webgl/WebGLChromosomeRenderer.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import Circle from './Circle'\r\n\r\nexport default class Chromosome {\r\n    public constructor(public circles: Circle[]) {}\r\n\r\n    public mutate(chance: number): void {\r\n        this.circles.forEach(c => c.mutate(chance));\r\n    }\r\n\r\n    public getClone(): Chromosome {\r\n        return new Chromosome(this.circles.map(c => c.getClone()));\r\n    }\r\n\r\n    public static getRandomChromosome(size: number): Chromosome {\r\n        const randomCircles: Circle[] = [];\r\n        for (let i = 0; i < size; i++) randomCircles.push(Circle.getRandomCircle());\r\n        return new Chromosome(randomCircles);\r\n    }\r\n\r\n    public static fromParents(c1: Chromosome, c2: Chromosome): Chromosome {\r\n        if (c1.circles.length !== c2.circles.length) throw new Error('Parents are not compatible');\r\n        const loopMax: number = c1.circles.length;\r\n        const randomParent = () => (Math.random() < 0.5) ? c1 : c2;\r\n        const circles: Circle[] = [];\r\n        for (let i=0; i < loopMax; i++) circles.push(randomParent().circles[i].getClone());\r\n        return new Chromosome(circles);\r\n    }\r\n}","import IChromosomeRenderer from \"./interfaces/IChromosomeRenderer\";\r\nimport Chromosome from \"./Chromosome\";\r\n\r\nexport default class ChromosomeFitnessCalculator {\r\n    constructor(private renderer: IChromosomeRenderer, private base: ImageData) {}\r\n\r\n    public calculateFitness(chromosome: Chromosome): number {\r\n        this.renderer.render(chromosome, this.base.width, this.base.height)\r\n        const data = this.renderer.getImageData(this.base.width, this.base.height).data;\r\n        const len = this.base.width * this.base.height * 4;\r\n        let result = 0;\r\n\r\n        let r, g, b, a;\r\n\r\n        for (let i=0; i < len; i += 4) {\r\n            r = this.base.data[i + 0] - data[i + 0];\r\n            g = this.base.data[i + 1] - data[i + 1];\r\n            b = this.base.data[i + 2] - data[i + 2];\r\n            a = this.base.data[i + 3] - data[i + 3];\r\n            result += (r*r) + (g*g) + (b*b) + (a*a);\r\n        }\r\n\r\n        return (len * (255*255)) - result;\r\n    }\r\n}","import Color from './Color'\r\n\r\nexport default class Circle {\r\n    public constructor(\r\n        private _x: number = 0, \r\n        private _y: number = 0, \r\n        private _radius: number = 0, \r\n        private _color: Color = new Color()) {}\r\n\r\n    public get x(): number {\r\n        return this._x;\r\n    }\r\n\r\n    public get y(): number {\r\n        return this._y;\r\n    }\r\n\r\n    public get radius(): number {\r\n        return this._radius;\r\n    }\r\n\r\n    public get color(): Color {\r\n        return this._color;\r\n    }\r\n\r\n    private mutateLocation(): void {\r\n        this._x = Math.random();\r\n        this._y = Math.random();\r\n    }\r\n\r\n    private mutateRadius(): void {\r\n        this._radius = Math.random() * 0.3;\r\n    }\r\n\r\n    private mutateColor(): void {\r\n        this._color = Color.getRandomColor();\r\n    }\r\n\r\n    public mutate(chance: number): void {\r\n        if(Math.random() * 100 < chance) {\r\n            this.mutateLocation();\r\n        }\r\n\r\n        if(Math.random() * 100 < chance) {\r\n            this.mutateRadius();\r\n        }\r\n\r\n        if(Math.random() * 100 < chance) {\r\n            this.mutateColor();\r\n        }\r\n    }\r\n\r\n    public getClone(): Circle {\r\n        return new Circle(this.x, this.y, this.radius, this.color);\r\n    }\r\n\r\n    public static getRandomCircle(): Circle {\r\n        return new Circle(Math.random(), Math.random(), Math.random() * 0.3, Color.getRandomColor());\r\n    }\r\n\r\n    public toString(): string {\r\n        return `(${this.x}, ${this.y}, ${this.radius}, ${this.color})`;\r\n    }\r\n}","export default class Color {\r\n    public constructor(private _r = 0, private _g = 0, private _b = 0, private _a = 0) {\r\n        const limitNumber = (n: number, min: number, max: number) => Math.max(min, Math.min(max, n))\r\n        this._r = Math.floor(limitNumber(this._r, 0, 255));\r\n        this._g = Math.floor(limitNumber(this._g, 0, 255));\r\n        this._b = Math.floor(limitNumber(this._b, 0, 255));\r\n        this._a = limitNumber(this._a, 0, 1);\r\n    }\r\n\r\n    public static getRandomColor(): Color {\r\n        const randInt = (n: number) => Math.floor(Math.random() * n);\r\n        return new Color(randInt(256), randInt(256), randInt(256), Math.random());\r\n    }\r\n\r\n    public get r(): number {\r\n        return this._r;\r\n    }\r\n\r\n    public get g(): number {\r\n        return this._g;\r\n    }\r\n\r\n    public get b(): number {\r\n        return this._b;\r\n    }\r\n\r\n    public get a(): number {\r\n        return this._a;\r\n    }\r\n\r\n    public toString(): string {\r\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\r\n    }\r\n}","import Canvas2DChromosomeRenderer from './Canvas2DChromosomeRenderer';\r\nimport Chromosome from './Chromosome';\r\nimport ChromosomeFitnessCalculator from './ChromosomeFitnessCalculator';\r\nimport WebGLChromosomeRenderer from './webgl/WebGLChromosomeRenderer';\r\nimport CircleTextureBuilder from './webgl/CircleTextureBuilder';\r\n\r\nlet inMemoryCanvas1 = document.createElement('canvas');\r\nlet inMemoryCanvas2 = document.createElement('canvas');\r\nlet inMemoryContext1 = inMemoryCanvas1.getContext('webgl');\r\nlet inMemoryContext2 = inMemoryCanvas2.getContext('2d');\r\nvar stats = document.getElementById('stats');\r\n\r\n(<any>window).loadImage = function(fileInput: HTMLInputElement) {\r\n    if (!fileInput.files[0]) return;\r\n\r\n    let img = <HTMLImageElement>document.getElementById('img');\r\n    img.src = URL.createObjectURL(fileInput.files[0]);\r\n\r\n    img.onload = function() {\r\n        var c = <HTMLCanvasElement>document.getElementById('myCanvas');\r\n        // let t = c.getContext('2d');\r\n        let t = c.getContext('webgl');\r\n\r\n        c.width = img.width;\r\n        c.height = img.height;\r\n\r\n        inMemoryCanvas1.width = img.width;\r\n        inMemoryCanvas1.height = img.height;\r\n\r\n        inMemoryCanvas2.width = img.width;\r\n        inMemoryCanvas2.height = img.height;\r\n        inMemoryContext2.drawImage(img, 0, 0);\r\n        var baseImageData =  inMemoryContext2.getImageData(0, 0, c.width, c.height);\r\n        inMemoryContext2.clearRect(0, 0, c.width, c.height);\r\n\r\n        const mainRenderer = new WebGLChromosomeRenderer(t);\r\n        const inMemoryRenderer = new WebGLChromosomeRenderer(inMemoryContext1);\r\n        // const inMemoryRenderer = new Canvas2DChromosomeRenderer(inMemoryContext2);\r\n        const fitnessCalc = new ChromosomeFitnessCalculator(inMemoryRenderer, baseImageData);\r\n        const chromosomeSize = 300;\r\n\r\n        var populationSize = 30;\r\n        var BestPopulationCutOff = Math.floor(populationSize/4);\r\n        var generation = 0;\r\n\r\n        let population: Chromosome[] = [];\r\n        for (let i = 0; i < populationSize; i++) population.push(Chromosome.getRandomChromosome(chromosomeSize));\r\n        population.sort((a, b) => fitnessCalc.calculateFitness(b) - fitnessCalc.calculateFitness(a));\r\n\r\n        function start() {\r\n            var newPopulation: Chromosome[] = [];\r\n            \r\n            for(let i = 0; i < populationSize; i++) {   \r\n                const arg1 = population[Math.floor(Math.random() * populationSize) % BestPopulationCutOff];\r\n                const arg2 = population[Math.floor(Math.random() * populationSize) % BestPopulationCutOff];\r\n                const newChromosome = Chromosome.fromParents(arg1, arg2);\r\n                newChromosome.mutate(0.1);\r\n                newPopulation.push(newChromosome);\r\n            }\r\n            \r\n            newPopulation.sort((a, b) => fitnessCalc.calculateFitness(b) - fitnessCalc.calculateFitness(a));\r\n            population = newPopulation;\r\n            generation++;\r\n            mainRenderer.render(population[0], c.width, c.height);\r\n            let fitnessInPercent = 100 * fitnessCalc.calculateFitness(population[0]) / (c.width * c.height * 4 * (255*255));\r\n            stats.innerHTML = ('fitness: ' + fitnessInPercent.toFixed(2) + '<br />Generation: ' + generation);\r\n        }\r\n\r\n        // new Canvas2DChromosomeRenderer(t).render(Chromosome.getRandomChromosome(chromosomeSize), c.width, c.height);\r\n        // new WebGLChromosomeRenderer(t).render(Chromosome.getRandomChromosome(chromosomeSize), c.width, c.height);\r\n        setInterval(start, 10);\r\n    }\r\n}","export default class CircleTextureBuilder {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    private checkPowOf2(n: number): boolean {\r\n        return n && (n & (n-1)) === 0;\r\n    }\r\n\r\n    private calcDistance(x1: number, y1: number, x2: number, y2: number): number {\r\n        return Math.sqrt((x2-x1) * (x2-x1) + (y2-y1) * (y2-y1));\r\n    }\r\n\r\n    build(textureSize: number): ImageData {\r\n        if(!this.checkPowOf2(textureSize)) throw new Error(\"Texture Size Must Be A Power Of 2\");\r\n\r\n        let result = new ImageData(textureSize, textureSize);\r\n\r\n        for (let row = 0; row < textureSize; row++) {\r\n            for (let col = 0; col < textureSize; col++) {\r\n                let val = 0;\r\n                let x = col - textureSize / 2;\r\n                let y = row - textureSize / 2;\r\n                if (this.calcDistance(x, y, 0, 0) <= textureSize / 2) val = 255;\r\n\r\n                let pixelIndex = (row * textureSize + col) * 4;\r\n                result.data[pixelIndex + 0] = val;\r\n                result.data[pixelIndex + 1] = val;\r\n                result.data[pixelIndex + 2] = val;\r\n                result.data[pixelIndex + 3] = val;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n}","import IChromosomeRenderer from \"../interfaces/IChromosomeRenderer\";\r\nimport Chromosome from \"../Chromosome\";\r\nimport CircleTextureBuilder from \"./CircleTextureBuilder\";\r\nimport Circle from \"../Circle\";\r\n\r\nexport default class WebGLChromosomeRenderer implements IChromosomeRenderer {\r\n    private vsSource = `\r\n    attribute vec4 aVertexPosition;\r\n    attribute vec2 aTextureCoord;\r\n    attribute vec4 aVertexColor;\r\n\r\n    uniform vec2 uResolution;\r\n\r\n    varying highp vec2 vTextureCoord;\r\n    varying highp vec4 vVertexColor;\r\n\r\n    void main() {\r\n        vec4 scaledPosition = aVertexPosition * vec4(2.0 / uResolution.x, 2.0 / uResolution.y, 1.0, 1.0);\r\n        gl_Position = scaledPosition + vec4(-1.0, -1.0, 0.0, 0.0);\r\n        vTextureCoord = aTextureCoord;\r\n        vVertexColor = aVertexColor;\r\n    }`;\r\n\r\n    private fsSource = `\r\n    varying highp vec2 vTextureCoord;\r\n    varying highp vec4 vVertexColor;\r\n\r\n    uniform sampler2D uSampler;\r\n\r\n    void main() {\r\n        gl_FragColor = vVertexColor;\r\n        gl_FragColor.a *= texture2D(uSampler, vTextureCoord).a;\r\n    }`;\r\n\r\n    private shaderProgram: WebGLProgram;\r\n    private circleTexture: WebGLTexture;\r\n\r\n    private positionBuffer: WebGLBuffer;\r\n    private texCoordBuffer: WebGLBuffer;\r\n    private vertColorBuffer: WebGLBuffer;\r\n\r\n    private programInfo: any;\r\n\r\n    constructor(private renderingContext: WebGLRenderingContext) {\r\n        this.setup();\r\n    }\r\n\r\n    private setup(): void {\r\n        const gl = this.renderingContext;\r\n        const vertexShader = this.loadShader(gl.VERTEX_SHADER, this.vsSource);\r\n        const fragmentShader = this.loadShader(gl.FRAGMENT_SHADER, this.fsSource);\r\n\r\n        this.shaderProgram = gl.createProgram();\r\n        gl.attachShader(this.shaderProgram, vertexShader);\r\n        gl.attachShader(this.shaderProgram, fragmentShader);\r\n        gl.linkProgram(this.shaderProgram);\r\n\r\n        if (!gl.getProgramParameter(this.shaderProgram, gl.LINK_STATUS)) {\r\n            throw new Error('Unable to initialize the shader program: ' + gl.getProgramInfoLog(this.shaderProgram));\r\n        }\r\n\r\n        this.programInfo = {\r\n            attribLocations: {\r\n                vertexPosition: gl.getAttribLocation(this.shaderProgram, 'aVertexPosition'),\r\n                textureCoord: gl.getAttribLocation(this.shaderProgram, 'aTextureCoord'),\r\n                vertexColor: gl.getAttribLocation(this.shaderProgram, 'aVertexColor')\r\n            },\r\n            uniformLocations: {\r\n                resolution: gl.getUniformLocation(this.shaderProgram, 'uResolution'),\r\n                uSampler: gl.getUniformLocation(this.shaderProgram, 'uSampler')\r\n            },\r\n        };\r\n\r\n        this.circleTexture = gl.createTexture();\r\n        gl.bindTexture(gl.TEXTURE_2D, this.circleTexture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, new CircleTextureBuilder().build(256));\r\n        gl.generateMipmap(gl.TEXTURE_2D);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\r\n\r\n        this.positionBuffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\r\n        gl.vertexAttribPointer(this.programInfo.attribLocations.vertexPosition, 2, gl.FLOAT, false, 0, 0);\r\n        gl.enableVertexAttribArray(this.programInfo.attribLocations.vertexPosition);\r\n\r\n        this.texCoordBuffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.texCoordBuffer);\r\n        gl.vertexAttribPointer(this.programInfo.attribLocations.textureCoord, 2, gl.FLOAT, false, 0, 0);\r\n        gl.enableVertexAttribArray(this.programInfo.attribLocations.textureCoord);\r\n\r\n        this.vertColorBuffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertColorBuffer);\r\n        gl.vertexAttribPointer(this.programInfo.attribLocations.vertexColor, 4, gl.FLOAT, false, 0, 0);\r\n        gl.enableVertexAttribArray(this.programInfo.attribLocations.vertexColor);\r\n    }\r\n\r\n    private loadShader(type: number, source: string): WebGLShader {\r\n        const shader = this.renderingContext.createShader(type);\r\n        this.renderingContext.shaderSource(shader, source);\r\n        this.renderingContext.compileShader(shader);\r\n\r\n        if (!this.renderingContext.getShaderParameter(shader, this.renderingContext.COMPILE_STATUS)) {\r\n            const errorMessage = 'An error occurred compiling the shaders: ' + this.renderingContext.getShaderInfoLog(shader);\r\n            this.renderingContext.deleteShader(shader);\r\n            throw new Error(errorMessage);\r\n        }\r\n      \r\n        return shader;\r\n      }\r\n\r\n    render(chromosome: Chromosome, width: number, height: number): void {\r\n        const gl = this.renderingContext;\r\n        gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n\r\n        gl.enable(gl.BLEND);\r\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n        gl.clear(gl.COLOR_BUFFER_BIT);\r\n        gl.viewport(0, 0, width, height);\r\n\r\n\r\n        const positionsFromCircle = (c: Circle): number[] => {\r\n            const x = c.x * width;\r\n            const y = c.y * height;\r\n            const radius = c.radius * Math.min(width, height);\r\n            return [\r\n                x - radius, y - radius,\r\n                x + radius, y - radius,\r\n                x - radius, y + radius,\r\n                x + radius, y + radius,\r\n                x + radius, y - radius,\r\n                x - radius, y + radius\r\n            ];\r\n        };\r\n\r\n        const positions = chromosome.circles.reduce((a, b) => a.concat(positionsFromCircle(b)), []);\r\n\r\n        const texCoords = chromosome.circles.reduce((a, b) => a.concat([\r\n            0.0, 0.0,\r\n            1.0, 0.0,\r\n            0.0, 1.0,\r\n            1.0, 1.0,\r\n            1.0, 0.0,\r\n            0.0, 1.0,\r\n        ]), []);\r\n\r\n        const vertColors = chromosome.circles.reduce((a, b) => a.concat([\r\n            b.color.r/255, b.color.g/255, b.color.b/255, b.color.a,\r\n            b.color.r/255, b.color.g/255, b.color.b/255, b.color.a,\r\n            b.color.r/255, b.color.g/255, b.color.b/255, b.color.a,\r\n            b.color.r/255, b.color.g/255, b.color.b/255, b.color.a,\r\n            b.color.r/255, b.color.g/255, b.color.b/255, b.color.a,\r\n            b.color.r/255, b.color.g/255, b.color.b/255, b.color.a,\r\n        ]), []);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.texCoordBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(texCoords), gl.STATIC_DRAW);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertColorBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertColors), gl.STATIC_DRAW);\r\n\r\n        gl.activeTexture(gl.TEXTURE0);\r\n        gl.bindTexture(gl.TEXTURE_2D, this.circleTexture);\r\n\r\n        gl.useProgram(this.shaderProgram);\r\n        gl.uniform2fv(this.programInfo.uniformLocations.resolution, [width, height]);\r\n        gl.uniform1i(this.programInfo.uniformLocations.uSampler, 0);\r\n\r\n        gl.drawArrays(gl.TRIANGLES, 0, 6 * chromosome.circles.length);\r\n        \r\n    }\r\n\r\n    getImageData(width: number, height: number): ImageData {\r\n        const buffer = new Uint8Array(width * height * 4);\r\n        this.renderingContext.readPixels(0, 0, width, height, this.renderingContext.RGBA, this.renderingContext.UNSIGNED_BYTE, buffer);\r\n        const result = new ImageData(Uint8ClampedArray.from(buffer), width, height);\r\n        return result;\r\n    }\r\n}"],"sourceRoot":""}